{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Quiz Generator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="/static/css/base.css" />
    <link rel="stylesheet" href="{% static 'css/quizai.css' %}">
</head>
<body>
    <header>
            <div class="inner-head">
                <div class="inner-logo">
                    <img src="https://scontent-hkg1-2.xx.fbcdn.net/v/t1.15752-9/509617644_1412222906577794_4739279048360180404_n.png?_nc_cat=102&ccb=1-7&_nc_sid=9f807c&_nc_ohc=93bp-KCXyKIQ7kNvwGfnJZD&_nc_oc=AdkReJIhOEZUQUi038njdwsrihij8JneijTW7hbgvPYz_XS_gyfgXAO1zEfPFwZGZKOk6KxENOV5l8ezFkdMVruG&_nc_zt=23&_nc_ht=scontent-hkg1-2.xx&oh=03_Q7cD2gGUg1JEd2OLigqSAUc9v_NRJzkax7WaNG01NkhIyoARKA&oe=688410C3" alt="Logo">
                </div>
                <div class="inner-menu">
                    <ul>
                        <li>
                            <a href="{% url 'authentication:student_homepage' %}">HOME</a>
                        </li>
                        <li>
                            <a href="{% url 'ai:chatbot' %}">AI SUPPORTER</a>
                        </li>
                        <li>
                            <a href="{% url 'mainapp:aboutUs' %}">ABOUT US</a>
                        </li>
                    </ul>
                </div>
                <div class="inner-log">
                    <ul>
                        <li>
                            <a href="{% url 'mainapp:profile' %}">Profile</a>
                        </li>
                        <li>
                            <a href="{% url 'authentication:signout' %}">Log out</a>
                        </li>
                    </ul>
                </div>
            </div>
    </header>
    <div class="quizai-container">
        <div style="text-align: left;">
            <a href="{% url 'mainapp:back' %}" class="back-button">‚Üê Back</a>
        </div>
        <h1 class="text-center">üß† AI Quiz Generator</h1>

        <form method="POST" class="quiz-form">
            {% csrf_token %}
            <textarea name="topic" rows="4" placeholder="Enter a topic to generate quiz..." required></textarea>
            <button type="submit">Generate Quiz</button>
        </form>

        {% if quiz %}
        <div class="quiz-result">
            <h2>üìã Generated Quiz</h2>
            {% for q in quiz %}
            <div class="question-block">
                <p><strong>Question {{ forloop.counter }}:</strong> {{ q.question }}</p>
                {% for opt in q.options %}
                    <label>
                        <input type="radio" name="q{{ forloop.parentloop.counter }}"
                            value="{{ opt|slice:":1" }}"
                            onclick="checkAnswer(this, '{{ q.answer }}')">
                        {{ opt }}
                    </label><br>
                {% endfor %}
                <div class="result" style="display:none; margin-top: 5px;"></div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <footer class="footer">
        <div class="container">
            <div class="inner-content">
                <div class="row">
                    <div class="col-md-3 col-6">
                        <div class="inner-part">
                            <p class="inner-title">ABOUT US</p>
                            <p class="inner-desc">
                                AI-integrated programming learning system for Perl & Python.
                                Developed by CS466 group - Duy Tan University.
                            </p>
                            <div class="social-icons mt-3">
                                <a href="#"><i class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-youtube"></i></a>
                                <a href="#"><i class="fab fa-github"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="inner-part">
                            <p class="inner-title">CONTACT</p>
                            <ul class="contact-list">
                                <li><i class="fas fa-map-marker-alt"></i> 128 Hoang Minh Thao</li>
                                <li><i class="fas fa-phone"></i> (024) 3869 4242</li>
                                <li><i class="fas fa-envelope"></i> support@perlpython.edu.vn</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="inner-part">
                            <p class="inner-title">RESOURCES</p>
                            <ul class="resource-list">
                                <li><a href="#"><i class="fas fa-book"></i> Study materials</a></li>
                                <li><a href="#"><i class="fas fa-code"></i> Sample exercises</a></li>
                                <li><a href="#"><i class="fas fa-video"></i> Lecture videos</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="inner-part">
                            <p class="inner-title">SUPPORT</p>
                            <ul class="support-list">
                                <li><a href="#"><i class="fas fa-question-circle"></i> FAQ</a></li>
                                <li><a href="#"><i class="fas fa-shield-alt"></i> Privacy Policy</a></li>
                                <li><a href="#"><i class="fas fa-file-alt"></i> Terms of Use</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="copyright text-center mt-4">
                    <p>¬© 2023 AI-Integrated Learning System. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    function checkAnswer(input, correctAnswer) {
        const container = input.closest('.question-block');
        const resultBox = container.querySelector('.result');
        const userAnswer = input.value;

        if (userAnswer === correctAnswer) {
            resultBox.innerHTML = `<span style="color: green; font-weight: bold;">‚úÖ Correct!</span>`;
        } else {
            resultBox.innerHTML = `<span style="color: red; font-weight: bold;">‚ùå Incorrect.</span> Correct answer: <strong>${correctAnswer}</strong>`;
        }
        resultBox.style.display = 'block';

        // Disable all inputs in this question
        const radios = container.querySelectorAll('input[type="radio"]');
        radios.forEach(r => r.disabled = true);
    }
    </script>
</body>
</html>
